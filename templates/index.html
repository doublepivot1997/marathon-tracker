{% extends "base.html" %}

{% block container_class %}wide{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="dashboard-sidebar">
        <div class="metric-pill">
            <div class="label">Weekly Total</div>
            <div class="value">{{ "%.1f"|format(week_miles) }} mi</div>
        </div>

        <div class="metric-pill">
            <div class="label">Avg RHR (BPM)</div>
            <div class="value">{{ avg_rhr|int if avg_rhr else '-' }}</div>
        </div>

        <div class="insight-box">
            <div class="label">Key Insight</div>
            <div class="text">{{ key_insight or 'Add more entries to see insights' }}</div>
        </div>
    </div>

    <div class="dashboard-main">
        <div class="activity-log">
            <div class="activity-log-header">
                <h2>Activity Log</h2>
            </div>

            {% if entries %}
            <div class="activity-log-table">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Type</th>
                            <th>Miles</th>
                            <th>Pace</th>
                            <th>HR</th>
                            <th>RHR</th>
                            <th>HRV</th>
                            <th>RPE</th>
                            <th>Sleep</th>
                            <th>Stress</th>
                            <th>Caff</th>
                            <th>Alc</th>
                            <th>Nic</th>
                            <th>Travel</th>
                            <th>Stretch</th>
                            <th>Music</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for entry in entries[:20] %}
                        <tr>
                            <td>{{ entry.date }}</td>
                            <td>{{ entry.time_of_day|title }}</td>
                            <td>{{ entry.type|title }}</td>
                            <td>{{ entry.miles if entry.miles else '-' }}</td>
                            <td>{{ entry.pace or '-' }}</td>
                            <td>{{ entry.hr or '-' }}</td>
                            <td>{{ entry.rhr or '-' }}</td>
                            <td>{{ entry.hrv or '-' }}</td>
                            <td>{{ entry.rpe or '-' }}</td>
                            <td>{{ entry.sleep_quality or '-' }}</td>
                            <td>{{ entry.stress or '-' }}</td>
                            <td>{{ entry.caffeine or 0 }}</td>
                            <td class="{{ 'yes' if entry.alcohol else 'no' }}">{{ 'Y' if entry.alcohol else 'N' }}</td>
                            <td class="{{ 'yes' if entry.nicotine else 'no' }}">{{ 'Y' if entry.nicotine else 'N' }}</td>
                            <td class="{{ 'yes' if entry.travel else 'no' }}">{{ 'Y' if entry.travel else 'N' }}</td>
                            <td class="{{ 'yes' if entry.stretch else 'no' }}">{{ 'Y' if entry.stretch else 'N' }}</td>
                            <td class="{{ 'yes' if entry.music else 'no' }}">{{ 'Y' if entry.music else 'N' }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="empty-state">
                <h2>No entries yet</h2>
                <p>Start tracking your training</p>
                <a href="{{ url_for('add_entry') }}">Add Entry</a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
